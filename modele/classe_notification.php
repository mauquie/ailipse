<?phpif(!class_exists("notification")){	class notification extends BDD	{		private $nbNotif;		// nombre de notification	nbCompte+nbAnnonce+nbControle		private $nbCompte;		// nombre de comptes a valider 		private $nbAnnonce;		// nombre d'annonces a valider 		private $nbControle;	// nombre de controles a verifier 				public function __construct()		{		}				public function updateNotif()	// a pour but d'actualiser les notifications		{			$connect=$this->OpenBDD();	//connexion a la base de données 			$sql = "SELECT * FROM notifications";	// on recupere toutes les notifications			$result = $connect->query($sql);			if ($result->num_rows > 0) 		// verification si il y a au moins une ligne dans la bdd 			{			// On traîte la requête				while($row = $result->fetch_assoc()) 				{					$this->nbCompte = $row["comptes"];		// récuperation de la bdd du nombre de comptes a activer 					$this->nbControle= $row["saisies"];		// récuperation de la bdd du nombre de controles a activer 					$this->nbAnnonce = $row["annonces"];	// récuperation de la bdd du nombre d'annonces a activer 				}			}			else 			{						}			$this->nbNotif=$this->nbCompte+$this->nbControle+$this->nbAnnonce;	// modifie le nombre de notifications			$this->CloseBDD($connect);	// fermeture de la base de données		}		public function notifications() {			global $login_session;					if(!isset($login_session)) {				return ('<div class="mdl-layout__header-row">							<span class="mdl-layout-title animated fadeInDown">Ailipse Technique</span>							<div class="mdl-layout-spacer"></div>														<a href="index.php?a=connexion">								<button class="mdl-button mdl-js-button mdl-button--accent">								  Connexion								</button>							</a>						</div>');			} else {				if ($this->nbNotif == 0) {										return('<div class="mdl-layout__header-row">								  <span class="mdl-layout-title animated fadeInDown">Ailipse Technique</span>								  								  <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="hdrbtn">									<div class="material-icons">notifications</div>									<div class="mdl-badge mdl-badge--overlap animated lightSpeedOut" data-badge="'.$this->nbNotif.'"></div>								  </button>								  <div class="mdl-layout-spacer"></div>								  								  <a href="index.php?a=deconnexion">									<button class="mdl-button mdl-js-button mdl-button--accent">									  Déconnexion									</button>								  </a>							</div>');									} else {										return ('<div class="mdl-layout__header-row">								  <span class="mdl-layout-title animated fadeInDown">Ailipse Technique</span>								  								  								  <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon animated tada" id="hdrbtn">									<div class="material-icons mdl-badge mdl-badge--overlap">notifications</div>									<div class="mdl-badge mdl-badge--overlap animated lightSpeedIn" data-badge="'.$this->nbNotif.'"></div>								  </button>								<ul class="mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--bottom-left" for="hdrbtn">									<a href="?a=notifications" class="mdl-menu__item"><li class="mdl-menu__item"><strong>'.$this->nbCompte.'</strong> compte(s) à  vérifier</li></a>									<a href="?a=notifications" class="mdl-menu__item"><li class="mdl-menu__item"><strong>'.$this->nbControle.'</strong> saisie(s) à  contrôler</li></a>									<a href="?a=notifications" class="mdl-menu__item"><li class="mdl-menu__item"><strong>'.$this->nbAnnonce.'</strong> annonce(s) à  valider</li></a>								</ul>								  <div class="mdl-layout-spacer"></div>								  								  <a href="index.php?a=deconnexion">									<button class="mdl-button mdl-js-button mdl-button--accent">									  Déconnexion									</button>								  </a>								  							</div>');				}			}		}		public function gestion_notif()	// a voir avec julien 		{			// on se connecte Ã  la base de données			$connect=$this->OpenBDD();			// on sélectionne dans la base de données tous les clients qui ne sont pas encore actifs			$query="SELECT * FROM `clients` WHERE actif = 0";			$result=$connect->query($query);			$client = "";			// on range tous les clients dans un tableau			while($row = $result->fetch_array())			{				$client = $client."				<tr id='$row[0]'>					<td class="."mdl-data-table__cell--non-numeric".">$row[1]</td>					<td>$row[3]</td>					<td>$row[4]</td>					<td>$row[5]</td>					<td>$row[7]</td>					<td>$row[8]</td>					<td>$row[6]</td>					<td>$row[10]</td>					<td>$row[11]</td>					<td>$row[9]</td>				</tr>";			}						// on ferme la connexion Ã  la base de données			$this->CloseBDD($connect);						// on affiche le contenu propre Ã  la gestion des notifications			return ('<div class="demo-card-wide mdl-card mdl-shadow--2dp">					<div class="mdl-card__title mdl-card-administration__background animated slideInDown">					<h2 class="mdl-card__title-text">Panel administrateur</h2>					</div>				<div class="mdl-card__supporting-text card-background">									<h5 class="animated slideInLeft">Gestion des notifications</h5>				<br />					<h6 class="animated slideInLeft">Nouveaux comptes à vérifier :</h6>				<table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp">				<thead>					<tr>					<th class="mdl-data-table__cell--non-numeric">E-mail</th>				  <th>Nom</th>				  <th>Prénom</th>				  <th>Téléphone</th>				  <th>Adresse expédition</th>				  <th>Code postal expédition</th>				  <th>Ville expédition</th>				  <th>Adresse facturation</th>				  <th>Code postal facturation</th>				  <th>Ville facturation</th>				</tr>			  </thead>			  <tbody>			'.$client.'			  </tbody>			</table>			<br />			<button onClick="activate()" class="mdl-button mdl-js-button mdl-button--primary">			  Activer			</button>			<button onClick="delete_notifications()" style="color: #F44336;" class="mdl-button mdl-js-button mdl-button--accent">			  Supprimer			</button>			</div>');								}	}}	?>